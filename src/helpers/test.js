let data = {
  categories: [
    {
      key: "agarbattis",
      basePath: "/static/images/categories/agarbattis",
      sub: [
        {
          key: "14-agarbatti.jpg",
          basePath: "/static/images/categories/agarbattis/14-agarbatti.jpg",
          sub: [],
          isFile: true,
        },
      ],
      isFile: false,
    },
    {
      key: "ayurvedicoils",
      basePath: "/static/images/categories/ayurvedicoils",
      sub: [
        {
          key: "ayurfile.js",
          basePath: "/static/images/categories/ayurvedicoils/ayurfile.js",
          sub: [],
          isFile: true,
        },
      ],
      isFile: false,
    },
    {
      key: "beverages",
      basePath: "/static/images/categories/beverages",
      sub: [
        {
          key: "1-kokum.jpg",
          basePath: "/static/images/categories/beverages/1-kokum.jpg",
          sub: [],
          isFile: true,
        },
      ],
      isFile: false,
    },
    {
      key: "cleaningproducts",
      basePath: "/static/images/categories/cleaningproducts",
      sub: [
        {
          key: "8-phenyl.jpg",
          basePath: "/static/images/categories/cleaningproducts/8-phenyl.jpg",
          sub: [],
          isFile: true,
        },
        {
          key: "bleachingpowder",
          basePath:
            "/static/images/categories/cleaningproducts/bleachingpowder",
          sub: [],
          isFile: false,
        },
        {
          key: "detergents",
          basePath: "/static/images/categories/cleaningproducts/detergents",
          sub: [],
          isFile: false,
        },
        {
          key: "dishwash",
          basePath: "/static/images/categories/cleaningproducts/dishwash",
          sub: [
            {
              key: "liquidsoap",
              basePath:
                "/static/images/categories/cleaningproducts/dishwash/liquidsoap",
              sub: [],
              isFile: false,
            },
            {
              key: "powder",
              basePath:
                "/static/images/categories/cleaningproducts/dishwash/powder",
              sub: [],
              isFile: false,
            },
          ],
          isFile: false,
        },
        {
          key: "floorwash",
          basePath: "/static/images/categories/cleaningproducts/floorwash",
          sub: [],
          isFile: false,
        },
        {
          key: "handwash",
          basePath: "/static/images/categories/cleaningproducts/handwash",
          sub: [],
          isFile: false,
        },
        {
          key: "phenyls",
          basePath: "/static/images/categories/cleaningproducts/phenyls",
          sub: [],
          isFile: false,
        },
        {
          key: "vehiclewash",
          basePath: "/static/images/categories/cleaningproducts/vehiclewash",
          sub: [],
          isFile: false,
        },
      ],
      isFile: false,
    },
    {
      key: "garments",
      basePath: "/static/images/categories/garments",
      sub: [
        {
          key: "3-shirts.jpg",
          basePath: "/static/images/categories/garments/3-shirts.jpg",
          sub: [],
          isFile: true,
        },
        {
          key: "4-women.jpg",
          basePath: "/static/images/categories/garments/4-women.jpg",
          sub: [],
          isFile: true,
        },
        {
          key: "6-garments.jpg",
          basePath: "/static/images/categories/garments/6-garments.jpg",
          sub: [],
          isFile: true,
        },
        {
          key: "7-tailoring.jpg",
          basePath: "/static/images/categories/garments/7-tailoring.jpg",
          sub: [],
          isFile: true,
        },
        {
          key: "bermudas",
          basePath: "/static/images/categories/garments/bermudas",
          sub: [],
          isFile: false,
        },
        {
          key: "kurtas",
          basePath: "/static/images/categories/garments/kurtas",
          sub: [],
          isFile: false,
        },
        {
          key: "nighty",
          basePath: "/static/images/categories/garments/nighty",
          sub: [],
          isFile: false,
        },
        {
          key: "overcoat",
          basePath: "/static/images/categories/garments/overcoat",
          sub: [],
          isFile: false,
        },
        {
          key: "pants",
          basePath: "/static/images/categories/garments/pants",
          sub: [],
          isFile: false,
        },
        {
          key: "shirts",
          basePath: "/static/images/categories/garments/shirts",
          sub: [
            {
              key: "1.jpg",
              basePath: "/static/images/categories/garments/shirts/1.jpg",
              sub: [],
              isFile: true,
            },
          ],
          isFile: false,
        },
      ],
      isFile: false,
    },
    {
      key: "millets",
      basePath: "/static/images/categories/millets",
      sub: [],
      isFile: false,
    },
    {
      key: "nutritionpowder",
      basePath: "/static/images/categories/nutritionpowder",
      sub: [
        {
          key: "10-nutritionpowder.jpg",
          basePath:
            "/static/images/categories/nutritionpowder/10-nutritionpowder.jpg",
          sub: [],
          isFile: true,
        },
      ],
      isFile: false,
    },
    {
      key: "oils",
      basePath: "/static/images/categories/oils",
      sub: [
        {
          key: "oils.js",
          basePath: "/static/images/categories/oils/oils.js",
          sub: [],
          isFile: true,
        },
      ],
      isFile: false,
    },
    {
      key: "pickles",
      basePath: "/static/images/categories/pickles",
      sub: [
        {
          key: "5.1-pickle.jpg",
          basePath: "/static/images/categories/pickles/5.1-pickle.jpg",
          sub: [],
          isFile: true,
        },
      ],
      isFile: false,
    },
    {
      key: "readytoeatmixes",
      basePath: "/static/images/categories/readytoeatmixes",
      sub: [
        {
          key: "bisibelebathmix",
          basePath: "/static/images/categories/readytoeatmixes/bisibelebathmix",
          sub: [],
          isFile: false,
        },
        {
          key: "puliyogremix",
          basePath: "/static/images/categories/readytoeatmixes/puliyogremix",
          sub: [],
          isFile: false,
        },
        {
          key: "ravaidlymix",
          basePath: "/static/images/categories/readytoeatmixes/ravaidlymix",
          sub: [],
          isFile: false,
        },
        {
          key: "upmamix",
          basePath: "/static/images/categories/readytoeatmixes/upmamix",
          sub: [],
          isFile: false,
        },
      ],
      isFile: false,
    },
    {
      key: "rexinbags",
      basePath: "/static/images/categories/rexinbags",
      sub: [
        {
          key: "11-rexinbags.jpg",
          basePath: "/static/images/categories/rexinbags/11-rexinbags.jpg",
          sub: [],
          isFile: true,
        },
        {
          key: "collegebags",
          basePath: "/static/images/categories/rexinbags/collegebags",
          sub: [],
          isFile: false,
        },
        {
          key: "executivebags",
          basePath: "/static/images/categories/rexinbags/executivebags",
          sub: [],
          isFile: false,
        },
        {
          key: "handbags",
          basePath: "/static/images/categories/rexinbags/handbags",
          sub: [],
          isFile: false,
        },
        {
          key: "ladiesbags",
          basePath: "/static/images/categories/rexinbags/ladiesbags",
          sub: [],
          isFile: false,
        },
        {
          key: "laptopbags",
          basePath: "/static/images/categories/rexinbags/laptopbags",
          sub: [],
          isFile: false,
        },
        {
          key: "luggagebags",
          basePath: "/static/images/categories/rexinbags/luggagebags",
          sub: [],
          isFile: false,
        },
        {
          key: "pouchbags",
          basePath: "/static/images/categories/rexinbags/pouchbags",
          sub: [],
          isFile: false,
        },
        {
          key: "schoolbags",
          basePath: "/static/images/categories/rexinbags/schoolbags",
          sub: [],
          isFile: false,
        },
        {
          key: "tiffinbags",
          basePath: "/static/images/categories/rexinbags/tiffinbags",
          sub: [],
          isFile: false,
        },
      ],
      isFile: false,
    },
    {
      key: "snacks",
      basePath: "/static/images/categories/snacks",
      sub: [
        {
          key: "1.jpg",
          basePath: "/static/images/categories/snacks/1.jpg",
          sub: [],
          isFile: true,
        },
        {
          key: "2.jpg",
          basePath: "/static/images/categories/snacks/2.jpg",
          sub: [],
          isFile: true,
        },
      ],
      isFile: false,
    },
    {
      key: "spicespowders",
      basePath: "/static/images/categories/spicespowders",
      sub: [
        {
          key: "garammasalapowder",
          basePath: "/static/images/categories/spicespowders/garammasalapowder",
          sub: [],
          isFile: false,
        },
        {
          key: "pulaomasalapowder",
          basePath: "/static/images/categories/spicespowders/pulaomasalapowder",
          sub: [],
          isFile: false,
        },
        {
          key: "rasampowder",
          basePath: "/static/images/categories/spicespowders/rasampowder",
          sub: [],
          isFile: false,
        },
        {
          key: "sambharpowder",
          basePath: "/static/images/categories/spicespowders/sambharpowder",
          sub: [],
          isFile: false,
        },
      ],
      isFile: false,
    },
  ],
};

var flatCats = [];

function getCategories(categories) {
  function deepLookUp(subCats, parent) {
    console.log("Inside deep look up", parent);
    let cat = {
      key: parent,
      subCat: [],
    };
    if (!subCats.length) {
      return;
    }
    subCats.forEach((element) => {
      if (!element.isFile) {
        cat.subCat.push(element.key);
        deepLookUp(element.sub, element.key);
      }
    });
    console.log("Now pushing the category for", parent);
    flatCats.push(cat);
  }

  deepLookUp(categories, "categories");
}

getCategories(data.categories);

console.log("The result is", flatCats);
